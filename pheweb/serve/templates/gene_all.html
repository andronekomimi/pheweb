{% extends "layout.html" %}


{% block in_head %}
<script type="text/javascript">
  window.gene_symbol = {{ gene_symbol|tojson|safe }};
  window.model.tooltip_lztemplate = {{ tooltip_lztemplate|tojson }};
  window.data = {{ data|tojson|safe }};
</script>
{# Includes for LocusZoom.js (from CDN) #}
<link href="https://cdn.jsdelivr.net/npm/locuszoom@{{ config.LZJS_VERSION }}/dist/locuszoom.css" rel="stylesheet" type="text/css">
<script src="https://cdn.jsdelivr.net/npm/locuszoom@{{ config.LZJS_VERSION }}/dist/locuszoom.app.min.js" type="text/javascript"></script>

<script src="{{ url_for('.static', filename='vendor/stream_table-1.1.1.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('.static', filename='gene_all.js') }}" type="text/javascript"></script>
{% endblock %}

{% block contained %}
<div class="row">
  <div class="col-xs-12">
    <h1 style="margin-top:0">{{ gene_symbol }}</h1>
  </div>
</div>

<div class="row">
  <div class="col-xs-12">
    <div id="lz-1" class="lz-container-responsive" data-region={{ region }}></div>
  </div>
</div>

<div class="row" style="margin-bottom: 0.5em">
  <div class="col-xs-12 col-sm-8 col-md-6">
        <input type="text" class="form-control" id="search" placeholder="Search... &quot;TCF7L2&quot;, &quot;rs1861867&quot;, etc.">
  </div>
  <div class="col-xs-12 col-sm-4 col-md-6">
    <h5 class="pull-right"><div id="streamtable-found" class="label label-primary"></div></h5>
  </div>
</div>
<div class="row stream_table_row">
  <div class="col-xs-12">
    <table id="stream_table" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Variant</th>
          <th>Position</th>
          <th>Reference</th>
          <th>Alternative</th>
          <th>Phenotype</th>
          <th>P Value</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>

<script type="text/template" id="streamtable-template">
  <tr>
    <td><%= p.variant %></td>
    <td><%= p.position %></td>
    <td><%= p.reference %></td>
    <td><%= p.alternative %></td>
    <td><a style="color:black" href="{{ url_for('.pheno_page', phenocode='').rstrip('/') }}/<%= p.phenocode %>"><%= p.phenostring || p.phenocode %></a></td>
    <td><%= p.pval.toExponential(1) %></td>
  </tr>
</script>

{% endblock %}
